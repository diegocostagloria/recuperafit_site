(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[916],{7199:(e,a,s)=>{Promise.resolve().then(s.bind(s,6819))},6819:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>h});var r=s(2860),n=s(3200),o=s(1193),t=s(9096),l=s(8727),d=s(6665),i=s(4768),c=s(6372),m=s(3625),u=s(2453),x=s(7804);function h(){let[e,a]=(0,n.useState)([]),[s,h]=(0,n.useState)(!0),[b,p]=(0,n.useState)(null),[g,y]=(0,n.useState)({name:"",email:"",phone:"",cep:"",address:"",neighborhood:"",city:"",state:"",deliveryDate:(0,o.GP)(new Date,"yyyy-MM-dd"),notes:""}),[f,j]=(0,n.useState)(""),[N,v]=(0,n.useState)(0),[E,w]=(0,n.useState)(!1),[C,F]=(0,n.useState)(null),[D,k]=(0,n.useState)(null),[P,A]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/plans-static");if(!e.ok)throw Error("Falha ao carregar planos");let s=await e.json(),r=s.plans||s;a(r),r.length>0&&(p(r[0]),_(r[0],g.deliveryDate))}catch(e){console.error("Erro ao carregar planos:",e),F("N\xe3o foi poss\xedvel carregar os planos dispon\xedveis. Por favor, tente novamente mais tarde.")}finally{h(!1)}})()},[]),(0,n.useEffect)(()=>{b&&g.deliveryDate&&_(b,g.deliveryDate)},[b,g.deliveryDate]);let S=async e=>{if(e&&8===e.length){A(!0);try{let a=await fetch("https://viacep.com.br/ws/".concat(e,"/json/"));if(!a.ok)throw Error("CEP n\xe3o encontrado");let s=await a.json();if(s.erro){F("CEP n\xe3o encontrado. Verifique o n\xfamero informado.");return}y({...g,address:s.logradouro,neighborhood:s.bairro,city:s.localidade,state:s.uf}),F(null)}catch(e){console.error("Erro ao buscar CEP:",e),F("N\xe3o foi poss\xedvel buscar o endere\xe7o pelo CEP. Por favor, preencha manualmente.")}finally{A(!1)}}},_=(e,a)=>{if(e&&a)try{let s=new Date(a),r=(0,t.f)(s,e.duration_days);j((0,o.GP)(r,"yyyy-MM-dd")),v(e.price)}catch(e){console.error("Erro ao calcular datas:",e)}},q=e=>{let{name:a,value:s}=e.target;y({...g,[a]:s}),"cep"===a&&8===s.length&&S(s)},z=async e=>{if(e.preventDefault(),!b){F("Por favor, selecione um plano.");return}if(!g.name||!g.email||!g.phone||!g.cep||!g.address){F("Por favor, preencha todos os campos obrigat\xf3rios.");return}w(!0),F(null),k(null);try{g.name,g.email,g.phone,"".concat(g.address,", ").concat(g.neighborhood,", ").concat(g.city," - ").concat(g.state,", CEP: ").concat(g.cep),b.id,b.name,g.deliveryDate,b.duration_days,g.notes,await new Promise(e=>setTimeout(e,1e3)),y({name:"",email:"",phone:"",cep:"",address:"",neighborhood:"",city:"",state:"",deliveryDate:(0,o.GP)(new Date,"yyyy-MM-dd"),notes:""}),k("Agendamento realizado com sucesso! Entraremos em contato para confirmar os detalhes."),window.scrollTo(0,0)}catch(e){console.error("Erro ao enviar agendamento:",e),F("N\xe3o foi poss\xedvel completar seu agendamento. Por favor, tente novamente mais tarde ou entre em contato conosco.")}finally{w(!1)}};return(0,r.jsx)("div",{className:"container mx-auto px-4 py-12",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-center mb-2 text-[#1E5F8C]",children:"Agende sua Bota Pneum\xe1tica"}),(0,r.jsx)("p",{className:"text-center text-gray-600 mb-8",children:"Preencha o formul\xe1rio abaixo para agendar o aluguel da sua bota de recupera\xe7\xe3o"}),C&&(0,r.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:C}),D&&(0,r.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6",children:D}),(0,r.jsxs)("form",{onSubmit:z,className:"bg-white shadow-md rounded-lg p-6 mb-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800 border-b pb-2",children:"Escolha seu Plano"}),s?(0,r.jsx)("div",{className:"flex justify-center items-center h-20",children:(0,r.jsx)(l.A,{className:"h-6 w-6 animate-spin text-[#1E5F8C]"})}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"plan",className:"block text-gray-700 font-medium mb-2",children:"Selecione o Plano"}),(0,r.jsx)("select",{id:"plan",name:"plan",value:(null==b?void 0:b.id)||"",onChange:a=>{let s=parseInt(a.target.value);p(e.find(e=>e.id===s)||null)},className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#1E5F8C]",required:!0,children:e.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," - ",e.duration_days," ",1===e.duration_days?"dia":"dias"," - R$ ",e.price.toFixed(2)]},e.id))})]}),b&&(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg mb-2",children:b.name}),(0,r.jsx)("p",{className:"text-gray-600 mb-2",children:b.description}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"text-gray-700",children:["Dura\xe7\xe3o: ",b.duration_days," ",1===b.duration_days?"dia":"dias"]}),(0,r.jsxs)("span",{className:"text-[#1E5F8C] font-bold text-xl",children:["R$ ",b.price.toFixed(2)]})]})]})]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800 border-b pb-2",children:"Datas"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"deliveryDate",className:"block text-gray-700 font-medium mb-2",children:[(0,r.jsx)(d.A,{className:"inline-block mr-2",size:18}),"Data de Entrega"]}),(0,r.jsx)("input",{type:"date",id:"deliveryDate",name:"deliveryDate",value:g.deliveryDate,onChange:q,min:(0,o.GP)(new Date,"yyyy-MM-dd"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#1E5F8C]",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"returnDate",className:"block text-gray-700 font-medium mb-2",children:[(0,r.jsx)(d.A,{className:"inline-block mr-2",size:18}),"Data de Retirada"]}),(0,r.jsx)("input",{type:"date",id:"returnDate",name:"returnDate",value:f,className:"w-full px-4 py-2 border border-gray-300 rounded-md bg-gray-100",disabled:!0}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Data calculada automaticamente com base no plano"})]})]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800 border-b pb-2",children:"Seus Dados"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"name",className:"block text-gray-700 font-medium mb-2",children:[(0,r.jsx)(i.A,{className:"inline-block mr-2",size:18}),"Nome Completo"]}),(0,r.jsx)("input",{type:"text",id:"name",name:"name",value:g.name,onChange:q,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#1E5F8C]",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"email",className:"block text-gray-700 font-medium mb-2",children:[(0,r.jsx)(c.A,{className:"inline-block mr-2",size:18}),"E-mail"]}),(0,r.jsx)("input",{type:"email",id:"email",name:"email",value:g.email,onChange:q,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#1E5F8C]",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"phone",className:"block text-gray-700 font-medium mb-2",children:[(0,r.jsx)(m.A,{className:"inline-block mr-2",size:18}),"Telefone (WhatsApp)"]}),(0,r.jsx)("input",{type:"tel",id:"phone",name:"phone",value:g.phone,onChange:q,placeholder:"(11) 99999-9999",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#1E5F8C]",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"cep",className:"block text-gray-700 font-medium mb-2",children:[(0,r.jsx)(u.A,{className:"inline-block mr-2",size:18}),"CEP"]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",id:"cep",name:"cep",value:g.cep,onChange:q,placeholder:"Somente n\xfameros",maxLength:8,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#1E5F8C]",required:!0}),P&&(0,r.jsx)(l.A,{className:"absolute right-3 top-3 h-4 w-4 animate-spin text-[#1E5F8C]"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Digite o CEP para preenchimento autom\xe1tico"})]})]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800 border-b pb-2",children:"Endere\xe7o de Entrega"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"address",className:"block text-gray-700 font-medium mb-2",children:[(0,r.jsx)(x.A,{className:"inline-block mr-2",size:18}),"Endere\xe7o Completo"]}),(0,r.jsx)("input",{type:"text",id:"address",name:"address",value:g.address,onChange:q,placeholder:"Rua, n\xfamero, complemento",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#1E5F8C]",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"neighborhood",className:"block text-gray-700 font-medium mb-2",children:"Bairro"}),(0,r.jsx)("input",{type:"text",id:"neighborhood",name:"neighborhood",value:g.neighborhood,onChange:q,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#1E5F8C]",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"city",className:"block text-gray-700 font-medium mb-2",children:"Cidade"}),(0,r.jsx)("input",{type:"text",id:"city",name:"city",value:g.city,onChange:q,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#1E5F8C]",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"state",className:"block text-gray-700 font-medium mb-2",children:"Estado"}),(0,r.jsx)("input",{type:"text",id:"state",name:"state",value:g.state,onChange:q,maxLength:2,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#1E5F8C]",required:!0})]})]})]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800 border-b pb-2",children:"Observa\xe7\xf5es"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"notes",className:"block text-gray-700 font-medium mb-2",children:"Informa\xe7\xf5es Adicionais (opcional)"}),(0,r.jsx)("textarea",{id:"notes",name:"notes",value:g.notes,onChange:q,rows:4,placeholder:"Informe detalhes adicionais como hor\xe1rio preferencial para entrega, instru\xe7\xf5es de acesso, etc.",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#1E5F8C]"})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800 border-b pb-2",children:"Resumo do Pedido"}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md mb-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("span",{className:"text-gray-700",children:"Plano:"}),(0,r.jsx)("span",{className:"font-semibold",children:(null==b?void 0:b.name)||"-"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("span",{className:"text-gray-700",children:"Data de Entrega:"}),(0,r.jsx)("span",{className:"font-semibold",children:g.deliveryDate||"-"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("span",{className:"text-gray-700",children:"Data de Retirada:"}),(0,r.jsx)("span",{className:"font-semibold",children:f||"-"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t border-gray-200 mt-2",children:[(0,r.jsx)("span",{className:"text-gray-700 font-bold",children:"Total:"}),(0,r.jsxs)("span",{className:"text-[#1E5F8C] font-bold text-xl",children:["R$ ",N.toFixed(2)]})]})]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{type:"submit",disabled:E,className:"bg-[#4CAF50] hover:bg-[#3d8b40] text-white font-semibold py-3 px-8 rounded-md transition-colors duration-300 flex items-center",children:E?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{className:"animate-spin mr-2",size:20}),"Processando..."]}):"Finalizar Agendamento"})})]})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[551,685,411,358],()=>a(7199)),_N_E=e.O()}]);